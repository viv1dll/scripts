local plr = game.Players.LocalPlayer
plr.Backpack["Flying Carpet"].Parent = plr.Character
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")

local highestpos = game:GetService("Workspace")

local function simulateLeftClick()
    -- Этот метод работает только в локальном контексте
    if RunService:IsClient() then
        -- Имитируем ввод мыши (ограниченно)
        local mouse = game.Players.LocalPlayer:GetMouse()
        
        -- Можно попробовать активировать инструмент если он есть
        local character = game.Players.LocalPlayer.Character
        if character then
            local tool = character:FindFirstChildOfClass("Tool")
            if tool then
                tool:Activate()
            end
        end
    end
end

simulateLeftClick()
wait(0.3)

local function findModelPathByChild(childName)
    -- Ищем объект по имени во всем Workspace
    local targetObject = game:GetService("Workspace"):FindFirstChild(childName, true)
    
    if targetObject then
        -- Находим родительскую модель (первого родителя, который является Model)
        local parentModel = targetObject
        while parentModel and not parentModel:IsA("Model") do
            parentModel = parentModel.Parent
        end
        
        if parentModel and parentModel:IsA("Model") then
            -- Получаем путь к модели (без целевого объекта)
            local pathParts = {}
            local current = parentModel
            
            -- Собираем путь от модели до Workspace
            while current and current ~= workspace do
                table.insert(pathParts, 1, current.Name) -- Добавляем в начало
                current = current.Parent
            end
            
            -- Формируем полный путь
            local fullPath = "Workspace." .. table.concat(pathParts, ".")
            return parentModel, fullPath
        else
            warn("Не удалось найти родительскую модель для:", targetObject:GetFullName())
        end
    else
        warn("Объект", childName, "не найден в Workspace")
    end
    
    return nil
end

-- Локальная переменная с позицией модели base
local basePosition = nil

-- Функция для получения и обновления позиции base
local function updateBasePosition()
    local model, path = findModelPathByChild("ESP_HighestNPC_All")
    if model then
        basePosition = model.WorldPivot.Position
        return basePosition
    else
        warn("Модель base не найдена")
        basePosition = nil
        return nil
    end
end

-- Использование
updateBasePosition()

local teleportpos = basePosition - Vector3.new(-10, 0, 0)
local teleportpos1 = basePosition - Vector3.new(10, 0, 0)
game:GetService("Players").LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(teleportpos)
game:GetService("Players").LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(teleportpos1)
